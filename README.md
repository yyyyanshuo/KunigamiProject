# KunigamiProject ğŸŒ¸

> ä¸€ä¸ªåŸºäº Flask å’Œ SQLite çš„è½»é‡çº§ AI èŠå¤©åº”ç”¨ï¼Œæ”¯æŒæ— å°½å†å²è®°å½•ã€æ—¶é—´æ„ŸçŸ¥ã€æµå¼å¯¹è¯ã€å¤šçº§è®°å¿†ç³»ç»Ÿ (Hierarchical Memory)ã€è‡ªåŠ¨åŒ–è®°å¿†æ•´ç†ä¸å…¨æ—¥è¯­æ²‰æµ¸å¼ä½“éªŒã€‚

## âœ¨ v1.3.0 æ–°ç‰¹æ€§

- **ğŸ§  å¤šçº§è®°å¿†ç³»ç»Ÿ**: çŸ­æœŸ(Short)ã€ä¸­æœŸ(Medium)ã€é•¿æœŸ(Long) ä¸‰çº§è®°å¿†è‡ªåŠ¨æµè½¬ã€‚
- **â° è‡ªåŠ¨åŒ–æ•´ç†**: åå°å®šæ—¶ä»»åŠ¡è‡ªåŠ¨è¿›è¡Œæ—¥ç»“å’Œå‘¨ç»“ï¼Œæ— éœ€äººå·¥å¹²é¢„ã€‚
- **ğŸŒ å…¨æ—¥è¯­æ”¯æŒ**: ç³»ç»Ÿ Prompt æ·±åº¦ä¼˜åŒ–ï¼Œæä¾›æ²‰æµ¸å¼æ—¥è¯­å¯¹è¯ä½“éªŒã€‚
- **ğŸ“ åŠ¨æ€ Prompt**: æ¨¡å—åŒ–ç®¡ç† Prompt æ–‡ä»¶ï¼Œæ”¯æŒçƒ­æ›´æ–°ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§ (Features)

- **ğŸ’¾ æŒä¹…åŒ–è®°å¿†**: ä½¿ç”¨ SQLite æ•°æ®åº“å®Œæ•´ä¿å­˜èŠå¤©è®°å½•ï¼Œä¸å†ä¸¢å¤±å¯¹è¯ä¸Šä¸‹æ–‡ã€‚
- **ğŸ“œ æ— é™æ»šåŠ¨**: ç±»ä¼¼ä¸»æµ IM è½¯ä»¶çš„ä½“éªŒï¼Œå‘ä¸Šæ»šåŠ¨è‡ªåŠ¨åŠ è½½å†å²æ¶ˆæ¯ã€‚
- **â° æ—¶é—´æ„ŸçŸ¥**: AI èƒ½å¤Ÿæ„ŸçŸ¥å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´ï¼Œå¯¹è¯æ›´åŠ è‡ªç„¶çœŸå®ã€‚
- **ğŸ«§ å¤šæ°”æ³¡æ¸²æŸ“**: æ”¯æŒ AI è¿ç»­å‘é€å¤šæ¡æ¶ˆæ¯ï¼ˆå¤šæ°”æ³¡ï¼‰ï¼Œå¹¶å¸¦æœ‰æ¨¡æ‹Ÿæ‰“å­—å»¶è¿Ÿï¼Œæ‹ŸäººåŒ–ç¨‹åº¦é«˜ã€‚
- **ğŸ“… æ™ºèƒ½æ—¶é—´è½´**: èŠå¤©è®°å½•æŒ‰æ—¥æœŸè‡ªåŠ¨åˆ†ç»„ï¼Œæ˜¾ç¤ºç¾è§‚çš„æ—¥æœŸåˆ†éš”ç¬¦ã€‚
- **ğŸ”„ åŒæ¨¡å‹æ”¯æŒ**: çµæ´»åˆ‡æ¢ Google Gemini å®˜æ–¹ API æˆ– OpenRouterï¼ˆå…¼å®¹ OpenAI æ ¼å¼ï¼‰æ¥å£ã€‚
- **ğŸ“‹ ä¾¿æ·æ“ä½œ**: æ”¯æŒä¸€é”®å¤åˆ¶æ¶ˆæ¯æ°”æ³¡å†…å®¹ï¼Œè¾“å…¥æ¡†é«˜åº¦è‡ªé€‚åº”ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ (Tech Stack)

- **Backend**: Python 3.x, Flask
- **Database**: SQLite3
- **Frontend**: HTML5, CSS3, Vanilla JavaScript (åŸç”Ÿ JSï¼Œæ— åºå¤§æ¡†æ¶ä¾èµ–)
- **AI Integration**: Google Generative AI SDK / OpenAI Compatible API

## âš™ï¸ é…ç½®æŒ‡å— (Setup Prompts)

ä¸ºäº†ä¿æŠ¤éšç§ï¼Œæœ¬é¡¹ç›®ä»“åº“ä¸­**æœªåŒ…å«**å…·ä½“çš„è§’è‰²è®¾å®šæ–‡ä»¶ã€‚
åœ¨è¿è¡Œé¡¹ç›®å‰ï¼Œè¯·åŠ¡å¿…åœ¨ `prompts/` ç›®å½•ä¸‹æ‰‹åŠ¨åˆ›å»ºä»¥ä¸‹æ–‡ä»¶ï¼š

| æ–‡ä»¶å | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹å†…å®¹ |
| :--- | :--- | :--- | :--- |
| **1_base_persona.md** | Markdown | **è§’è‰²æ ¸å¿ƒè®¾å®š**ã€‚åŒ…å«æ€§æ ¼ã€å£ç™–ã€èƒŒæ™¯æ•…äº‹ã€‚ | `åå‰ã¯åœ‹ç¥éŒ¬ä»‹ã€‚ãƒ—ãƒ­ã‚µãƒƒã‚«ãƒ¼é¸æ‰‹...` |
| **2_relationship.json** | JSON | **è§’è‰²å…³ç³»å›¾è°±**ã€‚Keyä¸ºç”¨æˆ·åã€‚ | `{"UserName": {"role": "æ‹äºº", "description": "..."}}` |
| **3_user_persona.md** | Markdown | **ç”¨æˆ·æ¡£æ¡ˆ**ã€‚AI éœ€è¦çŸ¥é“çš„å…³äºä½ çš„ä¿¡æ¯ã€‚ | `ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å¤§å­¦ç”Ÿã§ã€æ€§æ ¼ã¯...` |
| **4_memory_long.json** | JSON | **é•¿æœŸè®°å¿†** (æŒ‰æœˆ/å‘¨)ã€‚ | `{"2025-10": "å‡ºä¼šã„ã®å­£ç¯€..."}` |
| **5_memory_medium.json** | JSON | **ä¸­æœŸè®°å¿†** (æœ€è¿‘7å¤©)ã€‚ | `{"2025-12-01": "ä»Šæ—¥ã¯é›¨ã ã£ãŸ..."}` |
| **6_memory_short.json** | JSON | **çŸ­æœŸè®°å¿†** (å½“å¤©)ã€‚ | `{"2025-12-03": [{"time":"10:00","event":"..."}]}` |
| **7_schedule.json** | JSON | **æ—¥ç¨‹å®‰æ’**ã€‚ | `{"2025-12-25": "ã‚¯ãƒªã‚¹ãƒã‚¹ã®äºˆå®š"}` |

> **æç¤º**: `6_memory_short.json` å’Œ `5_memory_medium.json` å¦‚æœæ²¡æœ‰å†…å®¹ï¼Œå¯ä»¥ç•™ä¸€ä¸ªç©ºçš„ JSON å¯¹è±¡ `{}`ï¼Œç³»ç»Ÿè¿è¡Œåä¼šè‡ªåŠ¨ç”Ÿæˆã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹ (Quick Start)

### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/YourUsername/KunigamiProject.git
cd KunigamiProject
```

### 2. ç¯å¢ƒé…ç½®
å»ºè®®ä½¿ç”¨ Python è™šæ‹Ÿç¯å¢ƒï¼š
```bash
# Windows
python -m venv venv
.\venv\Scripts\activate

# macOS/Linux
python3 -m venv venv
source venv/bin/activate
```

å®‰è£…ä¾èµ–ï¼š
```bash
pip install -r requirements.txt
```

### 3. é…ç½®ç¯å¢ƒå˜é‡
åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API Keyï¼š

```ini
# é€‰æ‹©ä¸€ï¼šä½¿ç”¨ Google Gemini (æ¨è)
GEMINI_API_KEY=your_gemini_api_key_here

# é€‰æ‹©äºŒï¼šä½¿ç”¨ OpenRouter (æˆ–å…¶ä»– OpenAI å…¼å®¹æ¥å£)
USE_OPENROUTER=true
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
OPENROUTER_KEY=your_openrouter_key_here
```

### 4. è¿è¡Œåº”ç”¨
```bash
python app.py
```
å¯åŠ¨åï¼Œè®¿é—®æµè§ˆå™¨ï¼š`http://127.0.0.1:5000` å³å¯å¼€å§‹èŠå¤©ã€‚



## ğŸ“‚ é¡¹ç›®ç»“æ„

```text
KunigamiProject
â”œâ”€â”€ app.py              # åç«¯æ ¸å¿ƒé€»è¾‘ (Flask + APScheduler)
â”œâ”€â”€ memory_jobs.py      # è®°å¿†æ•´ç†ä»»åŠ¡è„šæœ¬
â”œâ”€â”€ prompts/            # Prompt æ¨¡å—æ–‡ä»¶å¤¹ (æ ¸å¿ƒ!)
â”‚   â”œâ”€â”€ 8_format.md     # [å·²åŒ…å«] è¾“å‡ºæ ¼å¼è§„èŒƒ
â”‚   â””â”€â”€ (å…¶ä»–æ–‡ä»¶éœ€è‡ªè¡Œåˆ›å»ºï¼Œè¯¦è§ä¸‹æ–¹é…ç½®æŒ‡å—)
â”œâ”€â”€ static/             # é™æ€èµ„æº (å¤´åƒã€CSS)
â”œâ”€â”€ templates/          # å‰ç«¯é¡µé¢
â”œâ”€â”€ chat_history.db     # æ•°æ®åº“ (è‡ªåŠ¨ç”Ÿæˆ)
â””â”€â”€ requirements.txt    # ä¾èµ–åˆ—è¡¨
```

## ğŸ“ è®¸å¯è¯
MIT License